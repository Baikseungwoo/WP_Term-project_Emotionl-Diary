<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Main</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <div class="container">
    <div class="top-right"><a href="/logout" class="button">Logout</a></div>
    <h1>Emotional Diary</h1>
    <div class="shelf">
      <div class="orb joy" title="Joy memory"></div>
      <div class="orb sadness" title="Sadness memory"></div>
      <div class="orb anger" title="Anger memory"></div>
      <div class="orb disgust" title="Disgust memory"></div>
      <div class="orb fear" title="Fear memory"></div>
    </div>
    <div class="bottom-center">
      <a href="write.html" class="button">Write</a>
    </div>
  </div>
  <img src="images/sound_icon.png" class="bottom-right" onclick="toggleSound()">
  <script>
    const userId = localStorage.getItem("userId");

    if (!userId) {
      alert("Please log in first.");
      window.location.href = "/login.html";
    }

    function handleLogout() {
      fetch("/logout")  // Terminate the session on the server
        .then(() => {
          localStorage.removeItem("user");  // Remove user info from localStorage
          window.location.href = "/index.html?logout=1";  // Redirect to homepage with logout flag
        })
        .catch(err => {
          console.error("Logout failed:", err);
          alert("Logout failed.");
        });
    }

    function toggleSound() {
      const bgm = document.getElementById("bgm");
      bgm.muted = !bgm.muted;
    }
  </script>
</body>

</html>